{"version":"5","defaultTimeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}},"sections":[{"id":"63d752ed-6008-4833-854f-c5b4d7a29fa1","type":"markdown","markdown":"# Intro a DQL con Logs\n* Una consulta DQL es una solicitud de solo lectura para procesar datos y devolver resultados. La solicitud se expresa en texto, utilizando un modelo de flujo de datos piepline-based que es fácil de leer, escribir y automatizar.\n\n## Encadenando comandos con el operador pipe ( | )\n\n* Una consulta DQL contiene al menos uno o más comandos, cada uno de los cuales devuelve una salida tabular que contiene registros (líneas o filas) y campos (columnas). Todos los comandos están secuenciados por un | (pipe). Los datos fluyen o se canalizan de un comando al siguiente. Los datos se filtran o manipulan en cada paso y luego se transmiten al siguiente paso.\n\n![](https://dt-cdn.net/images/dql-command-chain-1625-35b1bc0640.png?_gl=1*1w3m0sp*_ga*MTIyMjM2NjM2My4xNjk3NTgwMjA4*_ga_1MEMV02JXV*MTY5ODI3NDAxNy4xMTQuMS4xNjk4Mjc0ODg3LjAuMC4w)\n\n* Después de cada operación, DQL devuelve una tabla o una colección de tablas que contienen datos. El operador pipe canaliza esas tablas hacia la siguiente operación, donde se procesan o manipulan aún más. Esto facilita encadenar incrementalmente operaciones hasta lograr el resultado final previsto.\n\n* Debido a que el canalizado de información de un operador a otro es secuencial, el orden de los operadores de la consulta es importante y puede afectar tanto los resultados como el rendimiento.\n\n* La mejor manera de aprender DQL es comenzar con algunas consultas básicas. ¡Comencemos!"},{"id":"7513795d-bd12-4368-8471-d244b45f1e48","type":"markdown","markdown":"## Cargar la Data\n* El comando DQL **FETCH** define qué datos cargar desde Dynatrace y procesar opcionalmente en los pasos siguientes de la canalización de procesamiento.\n\n## Ejercicio 1\n1. Utiliza el comando **FETCH** para consultar los logs"},{"id":"984a9b9b-1c76-4262-850a-6a8a7467ca72","type":"dql","title":"Ejercicio 1.1 - Utiliza el comando FETCH para consultar los logs","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"0660031b-6205-4c16-82cf-9c45583e6323","type":"markdown","markdown":"## Especificar el período de tiempo\n\n* Sugerimos utilizar los controles ofrecidos por la interfaz de usuario para seleccionar el marco de tiempo de tu consulta.\n![](https://github.com/JasonOstroski/perform-hot24-intro-to-dql/assets/22330658/44193c2c-d199-405a-8aa7-e5e68fbc2eb7)\n* Sin embargo, la instrucción DQL te permite anular la selección de la interfaz de usuario usando los parámetros from o to para especificar tu rango de tiempo previsto.\n\n## Ejercicio 2\n\n1. Especificar el marco de tiempo en la interfaz de usuario (últimos 30 minutos).\n2. Especificar el marco de tiempo en la consulta (últimos 30 minutos).\n3. Especificar el marco de tiempo en la consulta (últimas 2 horas, excluyendo los últimos 30 minutos).\n* Nota: Cuando se especifica el marco de tiempo en la consulta, el selector de marco de tiempo de la interfaz de usuario se desactiva."},{"id":"79dba68b-1589-4eb3-a053-9d6c27dc51c2","type":"dql","title":"Ejercicio 2.1 - Especificar el marco de tiempo en la interfaz de usuario (últimos 30 minutos).","showTitle":true,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"c7e593c7-010d-490a-b2b6-6711c62f5520","type":"dql","title":"Ejercicio 2.2 - SEspecificar el marco de tiempo en la consulta (últimos 30 minutos).","showTitle":true,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"9f21f0e5-e05b-48d6-883f-d9387d7d6cf7","type":"dql","title":"Ejercicio 2.3 - Especificar el marco de tiempo en la consulta (últimas 2 horas, excluyendo los últimos 30 minutos).","showTitle":true,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"firstVisibleRowIndex":0,"columnWidths":{}}}},"showInput":true},{"id":"e75a4c13-8f14-46f9-bc84-d1cb2867dee1","type":"markdown","markdown":"### También puedes utilizar rangos de tiempo absolutos con el parámetro de \"timeframe\".\n\n* Ej: fetch logs, timeframe:\"2021-10-20T00:00:00Z/2021-10-28T12:00:00Z\""},{"id":"4e26c44b-033c-40cc-a64c-56539098fe27","type":"markdown","markdown":"## Filtrar\n\n* Reduzca el número de logs solicitados con FILTRAR\n* Utilice operadores como == o != para incluir o excluir campos con valores específicos.\n* Funciones como endsWith o contains le permiten incluir campos que terminan con o contienen una cadena específica.\n\n\n## Ejercicio 3\n\n* Consulte solo los logs de error.\n* Consulte logs de error y warn.\n* Consulte logs de error y warn del namespace hipstershop.\n* Consulte logs de error y warn del namespace hipstershop, pero no logs de los contenedores k8s de adservice.\n* Consulte logs que contengan \"AddItemAsync\" en el contenido.\n* Valide sus resultados revisando los datos (por ejemplo, verifique que solo se devuelvan los logs del namespace hipstershop)."},{"id":"720951d4-57b7-4c8c-a034-e2b51b2872ce","type":"dql","title":"Ejercicio 3.1 - Consulte solo los logs de error.","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"976d333f-3a7c-440a-ba9e-d61bbda3b98a","type":"dql","title":"Ejercicio 3.2 - Consulte logs de error y warn.","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"fcae0d3f-7cef-4316-a974-c6720889c83e","type":"dql","title":"Ejercicio 3.3 - Consulte logs de error y warn del namespace easytrade.","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"d6f69311-7bbc-41fe-9ce7-7e609e33b8d2","type":"dql","title":"Ejercicio 3.4 - Consulte logs de error y warn del namespace easytrade, pero no logs de los contenedores k8s de rabbitmq.","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"41a97945-fea6-430d-b81b-ba3ca6561457","type":"dql","title":"Ejercicio 3.5 - Consulte logs que contengan \"AddItemAsync\" en el contenido.","showTitle":false,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"684a96a5-593c-44b6-bd5b-701af6604475","type":"markdown","markdown":"## Seleccionar un subconjunto de campos\n* Dynatrace enriquece los logs con información importante de topología y campos, pero a veces solo queremos ver algunos campos\n* El comando **FIELDS** nos permite seleccionar qué campos deben ser devueltos\n\n## Ejercicio 4\n\n* Consulta los logs y devuelve solo los campos de marca de tiempo, nivel de registro, fuente de registro y contenido.\n* Consulta los logs, devuelve todos los campos y elimina solo el campo log.source."},{"id":"560f8dd7-bab8-46ea-bfd1-371767825222","type":"dql","title":"Ejercicio 4.1 - Consulta los logs y devuelve solo los campos de marca de tiempo, nivel de log, log.source y content","showTitle":true,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}},{"id":"20bb6235-540c-40b9-bb91-629b8c334c73","type":"dql","title":"Exercise 4.2 - Query logs, return all fields and remove only the log.source field","showTitle":true,"state":{"input":{"value":"","timeframe":{"from":"now-30m","to":"now","details":{"from":{"type":"expression","normalized":"now-30m","date":"2023-10-25T22:36:54.682Z"},"to":{"type":"expression","normalized":"now","date":"2023-10-25T23:06:54.682Z"}}}},"davis":{"includeLogs":true,"isDavisVisualizationAvailable":true,"davisVisualization":{"isAvailable":true}},"visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"firstVisibleRowIndex":0,"columnWidths":{}}},"state":"idle"}}]}